appId: ${APP_ID ?? "app.exactly"}
---
- assertVisible: One step left
- tapOn: Begin verifying
- assertVisible: I saved my ID with Persona
- tapOn: Begin verifying
- tapOn: Select
- tapOn: Passport
- runFlow:
    when: { visible: Couldn't access camera }
    commands: [{ tapOn: Continue }]
- tapOn: Take Photo
- tapOn: Use this photo
- assertVisible: Address
- runFlow: # HACK
    when: { platform: ios }
    commands: [{ tapOn: Address }]
- tapOn: Continue
- tapOn: Get started
- repeat:
    while: { visible: shutter button }
    commands: [{ tapOn: { text: shutter button, optional: true } }]
- inputText: test@test.com
- tapOn: Continue
- inputText: "12345"
- tapOn: Continue
- inputText: "999999999"
- tapOn: Continue
- inputText: "1234"
- extendedWaitUntil: { visible: Economic activity }
- tapOn: Economic activity
- tapOn: Science
- tapOn: Travel Usage
- tapOn: .*US\$.*
- tapOn: .*US\$.*
- tapOn: Continue
- tapOn: Select
- tapOn: \s*No\s*
- tapOn: Continue
- repeat: { times: 6, commands: [{ tapOn: square }] }
- tapOn: Continue
- tapOn: Done
- runScript: ../dist/getAccount.js
- runScript:
    file: ../dist/approveKYC.js
    env: { credentialId: "${output.owner}" }
